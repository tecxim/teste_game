<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Batalha Naval Arcade - Emojis & Ondas</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;\a
            background: linear-gradient(to bottom, #000428, #004e92);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            user-select: none;
            touch-action: manipulation;
            height: 100vh;
            width: 100vw;
        }
        #hud {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid rgba(0, 170, 255, 0.5);
            box-shadow: 0 0 8px rgba(0, 170, 255, 0.3);
            font-size: 14px;
            color: #0af;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            z-index: 100;
        }
        #hud span {
            font-weight: bold;
            color: #ffeb3b;
        }
        #messageBox {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 30, 0.95);
            padding: 20px 30px;
            border-radius: 12px;
            border: 1px solid rgba(0, 170, 255, 0.7);
            box-shadow: 0 0 15px rgba(0, 170, 255, 0.5);
            text-align: center;
            font-size: 18px;
            display: none;
            z-index: 100;
            animation: fadeIn 0.5s ease-in-out;
            max-width: 80%;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        #messageBox button {
            margin-top: 15px;
            padding: 8px 20px;
            font-size: 16px;
            background: rgba(0, 170, 255, 0.8);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 6px rgba(0, 170, 255, 0.5);
        }
        #messageBox button:hover {
            background: rgba(0, 170, 255, 1);
            box-shadow: 0 0 12px rgba(0, 170, 255, 0.8);
        }

        #controles {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between; /* Afasta os bot√µes para os lados */
            padding: 0 20px;
            z-index: 100;
        }

        #controles button {
            padding: 12px 18px;
            font-size: 16px;
            background: rgba(0, 170, 255, 0.8);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            min-width: 100px;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            border-radius: 0;
            box-shadow: none;
            margin: 0;
            padding: 0;
            background: rgba(0, 0, 20, 0.3);
            touch-action: none;
        }
    </style>
</head>
<body>
     // ---------------------------------------------
        // SONS
        // ---------------------------------------------
        function tocarSomTiro() {
            const somTiro = document.getElementById("somTiro");
            somTiro.currentTime = 0;
            somTiro.play().catch(e => console.log("Erro ao tocar som:", e));
        }
    <div id="hud">
        Fase: <span id="fase">1</span> |
        Pontos: <span id="score">0</span> |
        Vidas: <span id="vidas">3</span>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="messageBox">
        <div id="messageText"></div>
        <button onclick="restartGame()">Jogar Novamente</button>
    </div>
    <div id="controles">
        <button id="btnPausar" onclick="pausarJogo()">‚è∏ Pausar</button>
        <button id="btnDisparar" onclick="atirarJogador()">üî´ Disparar</button>
    </div>
    <script>

    // Protege esta p√°gina
    if (localStorage.getItem("token_acesso") !== "TOKEN_VALIDO") {
         window.location.href = "login.html";
        }
        // ---------------------------------------------
        // CONFIG DO JOGO
        // ---------------------------------------------
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        let keys = {};
        let tirosJogador = [];
        let tirosInimigos = [];
        let barcos = [];
        let score = 0;
        let vidas = 3;
        let faseAtual = 0;
        let jogoAtivo = true;
        let jogoPausado = false;
        let touchX = 0;
        let touchY = 0;
        let isTouching = false;
        // Emojis dos barcos
        const inimigos = ["üö§", "‚õµ", "üõ•Ô∏è", "üö¢"];
        const jogadorEmoji = "üö¢";
        // Player
        const player = {
            x: 0,
            y: 0,
            size: 50,
            speed: 5
        };
        // Ondas animadas
        let ondaOffset = 0;
        // Fases do jogo
        const fases = [
            { fundo: "rgba(0, 0, 20, 0.3)", velocidadeBarcos: 1, quantidadeBarcos: 1, faseFinal: false },
            { fundo: "rgba(0, 20, 40, 0.4)", velocidadeBarcos: 1.5, quantidadeBarcos: 2, faseFinal: false },
            { fundo: "rgba(0, 40, 60, 0.5)", velocidadeBarcos: 2, quantidadeBarcos: 3, faseFinal: false },
            { fundo: "rgba(40, 0, 60, 0.6)", velocidadeBarcos: 2.5, quantidadeBarcos: 5, faseFinal: true }
        ];

        // ---------------------------------------------
        // REDIMENSIONAR CANVAS
        // ---------------------------------------------
        function redimensionarCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            player.x = canvas.width / 2 - player.size / 2;
            player.y = canvas.height - player.size - 80; // Navio mais acima
        }

        // ---------------------------------------------
        // CONTROLES (Teclado e Toque)
        // ---------------------------------------------
        document.addEventListener("keydown", e => {
            keys[e.key] = true;
            if (e.key === " ") atirarJogador();
        });

        document.addEventListener("keyup", e => keys[e.key] = false);

        // Controles de toque para mover o navio (apenas horizontal)
        canvas.addEventListener("touchstart", e => {
            e.preventDefault();
            isTouching = true;
            touchX = e.touches[0].clientX;
        });

        canvas.addEventListener("touchmove", e => {
            e.preventDefault();
            if (!isTouching) return;
            touchX = e.touches[0].clientX;
            // Suaviza o movimento usando a velocidade do player
            if (touchX - player.size / 2 > player.x) {
                player.x += player.speed;
            } else if (touchX - player.size / 2 < player.x) {
                player.x -= player.speed;
            }
            // Limita a posi√ß√£o do player
            if (player.x < 0) player.x = 0;
            if (player.x > canvas.width - player.size) player.x = canvas.width - player.size;
        });

          <!-- üéµ M√∫sica de fundo -->
          <audio id="bgMusic" autoplay loop>
            <source src="https://www.bensound.com/bensound-music/bensound-buddy.mp3" type="audio/mpeg">
            Seu navegador n√£o suporta √°udio HTML5.
          </audio>

        // ---------------------------------------------
        // GERAR BARCO EMOJI
        // ---------------------------------------------
        function gerarBarco() {
            const fase = fases[faseAtual];
            for (let i = 0; i < fase.quantidadeBarcos; i++) {
                barcos.push({
                    emoji: inimigos[Math.floor(Math.random() * inimigos.length)],
                    x: Math.random() * (canvas.width - 50),
                    y: -70,
                    size: Math.random() < 0.5 ? 50 : 80, // Tamanhos diferentes
                    speed: fase.velocidadeBarcos,
                    podeAtirar: Math.random() < 0.3
                });
            }
        }

        // ---------------------------------------------
        // TIROS DO JOGADOR
        // ---------------------------------------------
        function atirarJogador() {
            if (jogoPausado || !jogoAtivo) return;
            // Verifica se est√° mirando em um barco grande
            let barcoGrandeMirado = false;
            barcos.forEach(barco => {
                if (barco.size === 80 && colide(
                    {x: player.x, y: player.y, w: player.size, h: player.size},
                    {x: barco.x, y: barco.y, w: barco.size, h: barco.size}
                )) {
                    barcoGrandeMirado = true;
                }
            });

            // Dispara sequencia se mirar em barco grande
            if (barcoGrandeMirado) {
                for (let i = 0; i < 3; i++) {
                    tirosJogador.push({
                        x: player.x + player.size/2 - 5,
                        y: player.y - 10,
                        w: 8,
                        h: 14,
                        speed: 7
                    });
                }
            } else {
                // Dispara tiro √∫nico
                tirosJogador.push({
                    x: player.x + player.size/2 - 5,
                    y: player.y - 10,
                    w: 8,
                    h: 14,
                    speed: 7
                });
            }
            tocarSomTiro();
        }

        // ---------------------------------------------
        // TIROS DOS INIMIGOS
        // ---------------------------------------------
        function atirarInimigo(barco) {
            tirosInimigos.push({
                x: barco.x + barco.size/2 - 5,
                y: barco.y + barco.size,
                w: 8,
                h: 14,
                speed: 5
            });
        }

        // ---------------------------------------------
        // COLIS√ÉO AABB
        // ---------------------------------------------
        function colide(a, b) {
            return a.x < b.x + b.size &&
                   a.x + a.w > b.x &&
                   a.y < b.y + b.size &&
                   a.y + a.h > b.y;
        }

        // ---------------------------------------------
        // DESENHAR FUNDO
        // ---------------------------------------------
        function desenharFundo() {
            const fase = fases[faseAtual];
            ctx.fillStyle = fase.fundo;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = "rgba(0, 170, 255, 0.7)";
            ctx.lineWidth = 2;
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                for (let x = 0; x < canvas.width; x++) {
                    let y = 8 * Math.sin((x * 0.02) + ondaOffset + i) + 150 + i*60;
                    ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
        }

        // ---------------------------------------------
        // UPDATE DO JOGO
        // ---------------------------------------------
        function update() {
            if (!jogoAtivo || jogoPausado) return;
            // Movimentos do jogador (teclado)
            if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
            if (keys["ArrowRight"] && player.x < canvas.width - player.size) player.x += player.speed;
            // Tiros do jogador
            tirosJogador.forEach(t => t.y -= t.speed);
            tirosJogador = tirosJogador.filter(t => t.y > -20);
            // Tiros dos inimigos
            tirosInimigos.forEach(t => t.y += t.speed);
            tirosInimigos = tirosInimigos.filter(t => t.y < canvas.height + 20);
            // Barcos inimigos
            barcos.forEach(barco => {
                barco.y += barco.speed;
                if (barco.podeAtirar && Math.random() < 0.01) {
                    atirarInimigo(barco);
                }
            });
            barcos = barcos.filter(barco => barco.y < canvas.height + 70);
            // Colis√£o tiro do jogador / barco inimigo
            for (let i = barcos.length - 1; i >= 0; i--) {
                for (let j = tirosJogador.length - 1; j >= 0; j--) {
                    if (colide(tirosJogador[j], barcos[i])) {
                        score += 10;
                        barcos.splice(i, 1);
                        tirosJogador.splice(j, 1);
                        break;
                    }
                }
            }
            // Colis√£o tiro inimigo / jogador
            for (let i = tirosInimigos.length - 1; i >= 0; i--) {
                if (colide(tirosInimigos[i], player)) {
                    vidas--;
                    tirosInimigos.splice(i, 1);
                    if (vidas <= 0) fimDeJogo(false);
                }
            }
            // Colis√£o barco inimigo / jogador
            for (let i = barcos.length - 1; i >= 0; i--) {
                if (colide(
                    {x: player.x, y: player.y, w: player.size, h: player.size},
                    {x: barcos[i].x, y: barcos[i].y, w: barcos[i].size, h: barcos[i].size}
                )) {
                    vidas--;
                    barcos.splice(i, 1);
                    if (vidas <= 0) fimDeJogo(false);
                }
            }
            // Avan√ßar de fase
            if (barcos.length === 0 && faseAtual < fases.length - 1) {
                faseAtual++;
                document.getElementById("fase").textContent = faseAtual + 1;
                gerarBarco();
            }
            // Vit√≥ria
            if (faseAtual === fases.length - 1 && barcos.length === 0) {
                fimDeJogo(true);
            }
            // HUD
            document.getElementById("score").textContent = score;
            document.getElementById("vidas").textContent = vidas;
        }

        // ---------------------------------------------
        // DESENHAR
        // ---------------------------------------------
        function draw() {
            desenharFundo();
            // Player
            ctx.font = "50px Arial";
            ctx.textAlign = "left";
            ctx.fillStyle = "white";
            ctx.fillText(jogadorEmoji, player.x, player.y + 45);
            // Inimigos
            barcos.forEach(barco => {
                ctx.font = barco.size + "px Arial";
                ctx.fillStyle = "white";
                ctx.fillText(barco.emoji, barco.x, barco.y + barco.size - 5);
            });
            // Tiros do jogador
            ctx.fillStyle = "#ffeb3b";
            tirosJogador.forEach(t => {
                ctx.beginPath();
                ctx.arc(t.x + t.w/2, t.y + t.h/2, t.w/2, 0, Math.PI * 2);
                ctx.fill();
            });
            // Tiros dos inimigos
            ctx.fillStyle = "red";
            tirosInimigos.forEach(t => {
                ctx.beginPath();
                ctx.arc(t.x + t.w/2, t.y + t.h/2, t.w/2, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        // ---------------------------------------------
        // LOOP
        // ---------------------------------------------
        let spawnTimer = 0;
        function gameLoop() {
            update();
            draw();
            ondaOffset += 0.02;
            spawnTimer++;
            if (spawnTimer > 120 && jogoAtivo && !jogoPausado) {
                gerarBarco();
                spawnTimer = 0;
            }
            requestAnimationFrame(gameLoop);
        }

        // ---------------------------------------------
        // FIM DE JOGO
        // ---------------------------------------------
        function fimDeJogo(vitoria) {
            jogoAtivo = false;
            const msg = document.getElementById("messageText");
            msg.innerHTML = vitoria
                ? "üéâ VOC√ä VENCEU!<br>Pontua√ß√£o: " + score
                : "üíÄ DERROTA!<br>Pontua√ß√£o: " + score;
            document.getElementById("messageBox").style.display = "block";
        }

        // ---------------------------------------------
        // REINICIAR
        // ---------------------------------------------
        function restartGame() {
            tirosJogador = [];
            tirosInimigos = [];
            barcos = [];
            score = 0;
            vidas = 3;
            faseAtual = 0;
            jogoPausado = false;
            jogoAtivo = true;
            player.x = canvas.width / 2 - player.size / 2;
            player.y = canvas.height - player.size - 80;
            document.getElementById("messageBox").style.display = "none";
            document.getElementById("fase").textContent = faseAtual + 1;
            document.getElementById("btnPausar").textContent = "‚è∏ Pausar";
            gerarBarco();
        }

        // ---------------------------------------------
        // PAUSAR JOGO
        // ---------------------------------------------
        function pausarJogo() {
            jogoPausado = !jogoPausado;
            document.getElementById("btnPausar").textContent = jogoPausado ? "‚ñ∂ Continuar" : "‚è∏ Pausar";
        }

        // ---------------------------------------------
        // INICIAR
        // ---------------------------------------------
        window.addEventListener("resize", redimensionarCanvas);
        redimensionarCanvas();
        gerarBarco();
        gameLoop();
    </script>

    <script>
    // Bloqueia clique direito
    document.addEventListener("contextmenu", function(e){
        e.preventDefault();
    });
    // Bloqueia teclas que abrem o DevTools
    document.onkeydown = function(e) {
        if (
            e.keyCode === 123 ||                     // F12
            (e.ctrlKey && e.shiftKey && e.keyCode === 73) || // Ctrl+Shift+I
            (e.ctrlKey && e.shiftKey && e.keyCode === 74) || // Ctrl+Shift+J
            (e.ctrlKey && e.keyCode === 85) ||       // Ctrl+U
            (e.ctrlKey && e.keyCode === 83)          // Ctrl+S
        ) {
            e.preventDefault();
            return false;
        }
    };
    // Bloqueia arrastar para fora, copiar e recortar
    document.addEventListener("copy", (e) => e.preventDefault());
    document.addEventListener("cut", (e) => e.preventDefault());
    document.addEventListener("dragstart", (e) => e.preventDefault());
    // Bloqueia sele√ß√£o de texto
    document.querySelectorAll("*").forEach(el => {
        el.style.userSelect = "none";
    });
    </script>
</body>
</html>
