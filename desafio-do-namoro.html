<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Pedido de Namoro üåπ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --boy-color: #4a90e2;
      --girl-color: #e83e8c;
      --success-color: #28a745;
      --error-color: #dc3545;
    }

    body {
      background: linear-gradient(to bottom, #ffe6f2, #e6f7ff);
      text-align: center;
      overflow-x: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      touch-action: manipulation;
    }

    .container {
      width: 100%;
      max-width: 100vw;
      padding: 10px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .header {
      flex-shrink: 0;
      padding: 10px 0;
    }

    .game-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      width: 100%;
    }

    .game-area {
      position: relative;
      flex: 1;
      width: 100%;
      margin: 10px auto;
      border-radius: 15px;
      border: 3px solid #ddd;
      background: #fefefe;
      overflow: hidden;
      touch-action: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      min-height: 60vh;
    }

    .boy, .girl, .basket {
      position: absolute;
      bottom: 20%; /* Ajustado para subir mais */
      text-align: center;
      width: 20%;
      max-width: 100px;
      z-index: 10;
    }

    .boy {
      left: 5%;
    }

    .girl {
      right: 5%;
      transition: all 2s ease;
    }

    .basket {
      left: 50%;
      transform: translateX(-50%);
      bottom: 25%; /* Ajustado para subir mais */
      width: 25%;
      max-width: 120px;
    }

    .character {
      font-size: 15vw;
      max-font-size: 80px;
      transition: all 1.5s ease;
    }

    .rose {
      position: absolute;
      font-size: 10vw;
      max-font-size: 50px;
      transition: all 1.5s ease-in-out;
      pointer-events: none;
      z-index: 5;
    }

    .together {
      bottom: 20% !important;
    }

    .boy.together {
      left: 35% !important;
    }

    .girl.together {
      left: 65% !important;
      right: auto !important;
    }

    .hearts {
      position: absolute;
      font-size: 8vw;
      max-font-size: 40px;
      color: red;
      animation: floatUp 2s linear forwards;
      pointer-events: none;
      z-index: 20;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) scale(1.5);
        opacity: 0;
      }
    }

    .sad {
      transform: scale(1.1);
      color: #555;
    }

    #restart-btn {
      display: none;
      margin: 10px auto;
      font-size: 16px;
      padding: 10px 20px;
    }

    #result-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 8vw;
      max-font-size: 40px;
      font-weight: bold;
      color: #d63384;
      display: none;
      z-index: 100;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      background: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 10px;
    }

    #name-form {
      margin: 10px auto;
      width: 90%;
      max-width: 400px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    button {
      margin: 5px;
      padding: 10px 15px;
      font-size: 16px;
    }

    h1 {
      font-size: 24px;
      margin: 10px 0;
      color: #d63384;
    }

    h3 {
      font-size: 18px;
      margin: 10px 0;
    }

    p {
      font-size: 14px;
      margin: 5px 0;
      line-height: 1.4;
    }

    input.form-control {
      font-size: 16px;
      padding: 8px;
    }

    .score-display {
      font-size: 16px;
      font-weight: bold;
      margin: 10px 0;
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .score-acertos {
      color: var(--success-color);
    }

    .score-erros {
      color: var(--error-color);
    }

    .name-display {
      font-size: 14px;
      font-weight: bold;
      margin-top: 5px;
      padding: 3px 8px;
      border-radius: 10px;
      display: inline-block;
    }

    .boy-name {
      background-color: var(--boy-color);
      color: white;
    }

    .girl-name {
      background-color: var(--girl-color);
      color: white;
    }

    .instructions {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 10px;
      margin: 10px 0;
      font-size: 14px;
    }

    @media (min-width: 768px) {
      h1 { font-size: 32px; }
      h3 { font-size: 22px; }
      p { font-size: 16px; }
      .character { font-size: 100px; }
      .rose { font-size: 60px; }
      .hearts { font-size: 50px; }
      #result-message { font-size: 40px; }
    }

    @media (max-height: 700px) {
      .game-area {
        min-height: 50vh;
      }
    }
  </style>
</head>
<body>
<script>
// Protege esta p√°gina
if (localStorage.getItem("token_acesso") !== "TOKEN_VALIDO") {
    window.location.href = "login.html";
}
</script>
  <div class="container">
    <div class="header">
      <h1 class="mb-2">üåπ Pedido de Namoro üåπ</h1>
      <div id="name-form">
        <div class="mb-2">
          <label for="boy-name" class="form-label">Nome do Rapaz:</label>
          <input type="text" class="form-control" id="boy-name" placeholder="Digite o nome do rapaz">
        </div>
        <div class="mb-2">
          <label for="girl-name" class="form-label">Nome da Mo√ßa:</label>
          <input type="text" class="form-control" id="girl-name" placeholder="Digite o nome da mo√ßa">
        </div>
        <button class="btn btn-primary" onclick="startGame()">Come√ßar Jogo</button>
      </div>
    </div>
    <div class="game-content">
      <div id="game-content" style="display: none;">
        <div class="instructions">
          <p>Toque na tela para lan√ßar rosas no cesto.</p>
          <p>‚úÖ Se acertar 7 ‚Üí ela aceita e os dois se aproximam ‚ù§Ô∏è</p>
          <p>‚ùå Se errar 7 ‚Üí os dois ficam tristes üò¢</p>
        </div>
        <div class="score-display">
          <span class="score-acertos" id="acertos-count">Acertos: 0</span>
          <span class="score-erros" id="erros-count">Erros: 0</span>
        </div>
        <button id="restart-btn" class="btn btn-primary" onclick="restartGame()">üîÑ Recome√ßar</button>
      </div>
      <div class="game-area" id="game-area">
        <div id="result-message"></div>
        <div class="boy" id="boy">
          <div class="character" id="boy-char">üë¶</div>
          <div id="boy-name-display" class="name-display boy-name">Rapaz</div>
        </div>
        <div class="basket" id="basket">
          <div class="character">üß∫</div>
        </div>
        <div class="girl" id="girl">
          <div class="character" id="girl-char">üëß</div>
          <div id="girl-name-display" class="name-display girl-name">Mocinha</div>
        </div>
      </div>
    </div>
  </div>
  <!-- sons -->
  <audio id="throw-sound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>
  <audio id="success-sound" src="https://www.soundjay.com/human/sounds/applause-01.mp3"></audio>
  <audio id="love-sound" src="https://www.soundjay.com/human/sounds/kiss-1.mp3"></audio>
  <audio id="fail-sound" src="https://www.soundjay.com/misc/sounds/fail-buzzer-01.mp3"></audio>
  <audio id="cheer-sound" src="https://www.soundjay.com/human/sounds/cheering-2.mp3"></audio>
  <audio id="boo-sound" src="https://www.soundjay.com/human/sounds/boo-1.mp3"></audio>
  <script>
    let score = 0;
    let errors = 0;
    let gameOver = false;
    let boyName = "Rapaz";
    let girlName = "Mocinha";
    let attempts = 0;
    let isThrowing = false; // Controle para lan√ßar uma rosa por vez
    const maxAttempts = 10; // Alterado para 10 chances

    function startGame() {
      boyName = document.getElementById('boy-name').value || "Rapaz";
      girlName = document.getElementById('girl-name').value || "Mocinha";
      document.getElementById('boy-name-display').textContent = boyName;
      document.getElementById('girl-name-display').textContent = girlName;
      document.getElementById('name-form').style.display = 'none';
      document.getElementById('game-content').style.display = 'block';
      document.getElementById('game-area').addEventListener('click', throwRose);
      document.getElementById('game-area').addEventListener('touchstart', throwRose, {passive: true});
      updateScoreDisplay();
    }

    function throwRose(e) {
      if (gameOver || attempts >= maxAttempts || isThrowing) return;
      isThrowing = true; // Bloqueia novos lan√ßamentos at√© terminar a anima√ß√£o

      if (e.type === 'touchstart') {
        e.preventDefault();
      }

      const gameArea = document.getElementById('game-area');
      const basket = document.getElementById('basket');

      const rose = document.createElement('div');
      rose.className = 'rose';
      rose.innerHTML = 'üåπ';
      rose.style.left = '15%';
      rose.style.bottom = '30%';
      gameArea.appendChild(rose);

      document.getElementById('throw-sound').play();

      const basketRect = basket.getBoundingClientRect();
      const gameRect = gameArea.getBoundingClientRect();

      const hit = Math.random() > 0.5;
      let targetX, targetY;

      if (hit) {
        const basketCenterX = (basketRect.left + basketRect.right) / 2 - gameRect.left;
        const basketCenterY = basketRect.top - gameRect.top;
        targetX = (basketCenterX / gameRect.width * 100) + '%';
        targetY = (basketCenterY / gameRect.height * 100) + '%';
      } else {
        let randomX, randomY;
        do {
          randomX = 10 + Math.random() * 80;
          randomY = 10 + Math.random() * 60;
          const basketX = (basketRect.left + basketRect.right) / 2 - gameRect.left;
          const basketY = basketRect.top - gameRect.top;
          const distance = Math.sqrt(
            Math.pow(randomX - (basketX / gameRect.width * 100), 2) +
            Math.pow(randomY - (basketY / gameRect.height * 100), 2)
          );
          if (distance > 15) break;
        } while (true);
        targetX = randomX + '%';
        targetY = randomY + '%';
      }

      setTimeout(() => {
        rose.style.left = targetX;
        rose.style.bottom = targetY;
      }, 100);

      setTimeout(() => {
        attempts++;
        if (hit) {
          score++;
          document.getElementById('acertos-count').textContent = "Acertos: " + score;
        } else {
          errors++;
          document.getElementById('erros-count').textContent = "Erros: " + errors;
        }
        rose.remove();
        isThrowing = false; // Permite novo lan√ßamento
        checkGameEnd();
      }, 1600);
    }

    function checkGameEnd() {
      if (score === 7) {
        gameOver = true;
        document.getElementById('success-sound').play();
        document.getElementById('cheer-sound').play();
        document.getElementById('basket').style.display = 'none';
        document.getElementById('boy').classList.add('together');
        document.getElementById('girl').classList.add('together');
        spawnHearts();
        setTimeout(() => document.getElementById('love-sound').play(), 2000);
        document.getElementById('result-message').innerText = "Namorados! üíï";
        document.getElementById('result-message').style.display = "block";
        showRestart();
      }
      if (errors === 7) {
        gameOver = true;
        document.getElementById('fail-sound').play();
        document.getElementById('boo-sound').play();
        document.getElementById('boy-char').innerText = "üò¢";
        document.getElementById('girl-char').innerText = "üò≠";
        document.getElementById('boy-char').classList.add('sad');
        document.getElementById('girl-char').classList.add('sad');
        document.getElementById('result-message').innerText = "Encalhados! üò¢";
        document.getElementById('result-message').style.display = "block";
        showRestart();
      }
      if (attempts >= maxAttempts && !gameOver) {
        gameOver = true;
        if (score > errors) {
          document.getElementById('success-sound').play();
          document.getElementById('cheer-sound').play();
          document.getElementById('basket').style.display = 'none';
          document.getElementById('boy').classList.add('together');
          document.getElementById('girl').classList.add('together');
          spawnHearts();
          setTimeout(() => document.getElementById('love-sound').play(), 2000);
          document.getElementById('result-message').innerText = "Namorados! üíï";
          document.getElementById('result-message').style.display = "block";
          showRestart();
        } else {
          document.getElementById('fail-sound').play();
          document.getElementById('boo-sound').play();
          document.getElementById('boy-char').innerText = "üò¢";
          document.getElementById('girl-char').innerText = "üò≠";
          document.getElementById('boy-char').classList.add('sad');
          document.getElementById('girl-char').classList.add('sad');
          document.getElementById('result-message').innerText = "Encalhados! üò¢";
          document.getElementById('result-message').style.display = "block";
          showRestart();
        }
      }
    }

    function spawnHearts() {
      const gameArea = document.getElementById('game-area');
      const centerX = gameArea.offsetWidth / 2;
      const centerY = gameArea.offsetHeight / 2;
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const heart = document.createElement('div');
          heart.className = 'hearts';
          heart.innerHTML = '‚ù§Ô∏è';
          const angle = Math.random() * Math.PI * 2;
          const distance = 30 + Math.random() * 50;
          const x = centerX + Math.cos(angle) * distance;
          const y = centerY + Math.sin(angle) * distance;
          heart.style.left = (x - 20) + 'px';
          heart.style.bottom = (gameArea.offsetHeight - y) + 'px';
          gameArea.appendChild(heart);
          setTimeout(() => heart.remove(), 2000);
        }, i * 200);
      }
    }

    function updateScoreDisplay() {
      document.getElementById('acertos-count').textContent = "Acertos: " + score;
      document.getElementById('erros-count').textContent = "Erros: " + errors;
    }

    function showRestart() {
      document.getElementById("restart-btn").style.display = "inline-block";
    }

    function restartGame() {
      score = 0;
      errors = 0;
      gameOver = false;
      attempts = 0;
      updateScoreDisplay();
      document.getElementById('boy-char').innerText = "üë¶";
      document.getElementById('girl-char').innerText = "üëß";
      document.getElementById('boy-char').classList.remove('sad');
      document.getElementById('girl-char').classList.remove('sad');
      document.getElementById('boy').classList.remove('together');
      document.getElementById('girl').classList.remove('together');
      document.getElementById('boy').style.left = "5%";
      document.getElementById('girl').style.right = "5%";
      document.getElementById('girl').style.left = "auto";
      document.getElementById('basket').style.display = 'block';
      document.querySelectorAll('.hearts').forEach(h => h.remove());
      document.querySelectorAll('.rose').forEach(r => r.remove());
      document.getElementById('result-message').style.display = "none";
      document.getElementById("restart-btn").style.display = "none";
    }
  </script>
<script>
// Bloqueia clique direito
document.addEventListener("contextmenu", function(e){
    e.preventDefault();
});
// Bloqueia teclas que abrem o DevTools
document.onkeydown = function(e) {
    if (
        e.keyCode === 123 ||                     // F12
        (e.ctrlKey && e.shiftKey && e.keyCode === 73) || // Ctrl+Shift+I
        (e.ctrlKey && e.shiftKey && e.keyCode === 74) || // Ctrl+Shift+J
        (e.ctrlKey && e.keyCode === 85) ||       // Ctrl+U
        (e.ctrlKey && e.keyCode === 83)          // Ctrl+S
    ) {
        e.preventDefault();
        return false;
    }
};
// Bloqueia arrastar para fora, copiar e recortar
document.addEventListener("copy", (e) => e.preventDefault());
document.addEventListener("cut", (e) => e.preventDefault());
document.addEventListener("dragstart", (e) => e.preventDefault());
// Bloqueia sele√ß√£o de texto
document.querySelectorAll("*").forEach(el => {
    el.style.userSelect = "none";
});
</script>
</body>
</html>
